<%- include('../includes/head.ejs') %>
    
<link rel="stylesheet" href="/css/main.css">

</head>

<body>
   <%- include('../includes/navigation.ejs') %>
   <main>
         <h1>Your Orders</h1>
         <% if (orders.length > 0) { %>
              <ul>
                <% orders.forEach(order => { %>
                     <li>
                            <h2>Order <%= order.id %></h2>
                            <p><strong>Products:</strong></p>
                            <ul>
                                <% order.products.forEach(product => { %>
                                     <li><%= product.title %> - <%= product.orderItem.quantity %>x</li>
                                <% }); %>
                            </ul>
                            <p><strong>Total Price:</strong> 
                               <%= order.products.reduce((sum, product) => sum + (product.orderItem.quantity * product.price), 0).toFixed(2) %> USD
                            </p>
                    </li>
                <% }); %>
              </ul>
         <% } else { %>
              <p>You don't have any orders yet.</p>
         <% } %>
   </main>

    <%- include('../includes/end.ejs') %>
</body>
</html>
